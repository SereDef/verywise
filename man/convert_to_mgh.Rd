% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/vw_postprocess.R
\name{convert_to_mgh}
\alias{convert_to_mgh}
\title{Convert statistical result FBMs to FreeSurfer `.mgh` format}
\usage{
convert_to_mgh(
  vw_results,
  result_path,
  stacks,
  stat_names = c("coef", "se", "p", "-log10p", "resid"),
  verbose = TRUE
)
}
\arguments{
\item{vw_results}{A named list of \link[bigstatsr]{FBM} objects containing the
statistical results.}

\item{result_path}{Character string indicating the base output path where the
\code{.mgh} files will be written.}

\item{stacks}{Vector of stack identifiers (e.g. hemisphere stack IDs) to be
included in output filenames (for non-residual stats).}

\item{stat_names}{Character vector of statistic names to process.
Default: \code{c("coef","se","p","-log10p","resid")}.
The special name \code{"-log10p"} triggers the on-the-fly p-value
transformation.}

\item{verbose}{Logical. Default: \code{TRUE}}
}
\value{
Invisibly returns \code{NULL}.
  Side effects: \code{.mgh} files are written to disk.
}
\description{
This function takes a list of \link[bigstatsr]{FBM} objects storing statistical
results and writes them to FreeSurfer-compatible `.mgh` files.
It supports coefficient, standard error, p-value, and residual maps, with
optional on-the-fly \eqn{-\log_{10}} transformation of p-values.
}
\details{
For residuals, all rows are written into a single \code{.mgh} file. For other
stats, data is written to one file per row (i.e. term).

When computing \eqn{-\log_{10}(p)} values, the transformation is applied
**in chunks of columns** to avoid loading the full FBM into memory.
}
\examples{
\dontrun{
library(bigstatsr)

# Dummy vw_results list with small FBMs
vw_results <- list(
  coef = FBM(5, 10, init = rnorm(50)),
  se   = FBM(5, 10, init = runif(50, 0.1, 1)),
  p    = FBM(5, 10, init = runif(50, 0, 1)),
  resid= FBM(20, 10, init = rnorm(200))
)

convert_to_mgh(
  vw_results = vw_results,
  result_path = "my_results/stat",
  stacks = 1:5
)
}

}
