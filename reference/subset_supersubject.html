<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Subset an existing supersubject matrix by matching folder IDs — subset_supersubject • verywise</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Subset an existing supersubject matrix by matching folder IDs — subset_supersubject"><meta name="description" content="This function subsets a FBM supersubject matrix that was
created using build_supersubject(), retaining only the rows that
correspond to a set of folder (or row) IDs.
It reads row names from an associated .csv file, checks for missing IDs,
and writes logs if any are not found. The new subsetted matrix can be saved
for future use."><meta property="og:description" content="This function subsets a FBM supersubject matrix that was
created using build_supersubject(), retaining only the rows that
correspond to a set of folder (or row) IDs.
It reads row names from an associated .csv file, checks for missing IDs,
and writes logs if any are not found. The new subsetted matrix can be saved
for future use."><meta property="og:image" content="https://seredef.github.io/verywise/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">verywise</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.2.5</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/00-installation-sys-requirements.html">Get ready - step 1: Installation and system requirements</a></li>
    <li><a class="dropdown-item" href="../articles/01-format-data.html">Get ready - step 2: preparing your data</a></li>
    <li><a class="dropdown-item" href="../articles/02-simulate-data.html">Optional: simulating data</a></li>
    <li><a class="dropdown-item" href="../articles/03-run-vw-lmm.html">Running vertex-wise linear mixed models</a></li>
    <li><a class="dropdown-item" href="../articles/04-run-slurm-array.html">Run many `verywise` analyses in parallel (on SLURM)</a></li>
    <li><a class="dropdown-item" href="../articles/05-visualize-results.html">Extracting and visualizing `verywise` results</a></li>
    <li><a class="dropdown-item" href="../articles/06-run-vw-meta.html">Running vertex-wise meta-analyses</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/SereDef/verywise/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Subset an existing supersubject matrix by matching folder IDs</h1>
      <small class="dont-index">Source: <a href="https://github.com/SereDef/verywise/blob/main/R/build_supersubject.R" class="external-link"><code>R/build_supersubject.R</code></a></small>
      <div class="d-none name"><code>subset_supersubject.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function subsets a <a href="https://privefl.github.io/bigstatsr/reference/FBM-class.html" class="external-link">FBM</a> supersubject matrix that was
created using <code><a href="build_supersubject.html">build_supersubject()</a></code>, retaining only the rows that
correspond to a set of folder (or row) IDs.
It reads row names from an associated <code>.csv</code> file, checks for missing IDs,
and writes logs if any are not found. The new subsetted matrix can be saved
for future use.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">subset_supersubject</span><span class="op">(</span></span>
<span>  <span class="va">supsubj_dir</span>,</span>
<span>  <span class="va">supsubj_file</span>,</span>
<span>  <span class="va">folder_ids</span>,</span>
<span>  error_cutoff <span class="op">=</span> <span class="fl">20</span>,</span>
<span>  <span class="va">new_supsubj_dir</span>,</span>
<span>  n_cores <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  save_rds <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-supsubj-dir">supsubj_dir<a class="anchor" aria-label="anchor" href="#arg-supsubj-dir"></a></dt>
<dd><p>Character string indicating the path to the directory
containing the supersubject files (i.e the supersubject matrix itself as a
<code>.rds</code> file, and the associated <code>.bk</code> and <code>.rownames.csv</code>
files).</p></dd>


<dt id="arg-supsubj-file">supsubj_file<a class="anchor" aria-label="anchor" href="#arg-supsubj-file"></a></dt>
<dd><p>Character string indicating the name of the supersubject
<code>.rds</code> file. Must follow the naming pattern
<code>"&lt;hemi&gt;.&lt;measure&gt;.&lt;fs_template&gt;.supersubject.rds"</code>.</p></dd>


<dt id="arg-folder-ids">folder_ids<a class="anchor" aria-label="anchor" href="#arg-folder-ids"></a></dt>
<dd><p>Character vector of folder IDs to retain in the new ss
matrix. This should also be a column in the phenotype dataset.</p></dd>


<dt id="arg-error-cutoff">error_cutoff<a class="anchor" aria-label="anchor" href="#arg-error-cutoff"></a></dt>
<dd><p>Integer indicating the maximum number of missing IDs that
is allowed before the function throws an error. If the number of missing IDs
is <code> &lt;= error_cutoff </code>, a warning is issued instead.
Default: 20.</p></dd>


<dt id="arg-new-supsubj-dir">new_supsubj_dir<a class="anchor" aria-label="anchor" href="#arg-new-supsubj-dir"></a></dt>
<dd><p>Character string indicating the path to the directory
where the new supersubject files should be stored (either temporarily or
permanently if <code> save_rds == TRUE </code>. Created if it does not exist.</p></dd>


<dt id="arg-n-cores">n_cores<a class="anchor" aria-label="anchor" href="#arg-n-cores"></a></dt>
<dd><p>Integer indicating the number of cores to use for parallel
processing.</p></dd>


<dt id="arg-save-rds">save_rds<a class="anchor" aria-label="anchor" href="#arg-save-rds"></a></dt>
<dd><p>Logical. If <code>TRUE</code>, the new ss is also saved to a
<code>.rds</code> file inside <code>new_supsubj_dir</code>.</p></dd>


<dt id="arg-verbose">verbose<a class="anchor" aria-label="anchor" href="#arg-verbose"></a></dt>
<dd><p>Logical. Default: <code>TRUE</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A <a href="https://privefl.github.io/bigstatsr/reference/FBM-class.html" class="external-link">FBM</a> object containing the subsetted supersubject matrix.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The function performs the following steps:</p><ol><li><p>Reads row names from the supersubject's <code>.csv</code> file.</p></li>
<li><p>Checks whether all <code>folder_ids</code> exist in the supersubject.</p></li>
<li><p>Logs missing IDs to <code>issues.log</code> in <code>new_supsubj_dir</code>.</p></li>
<li><p>If the number of missing IDs exceeds <code>error_cutoff</code>, stops with an error.</p></li>
<li><p>Creates a new FBM with only the matching rows, writing it blockwise to
avoid excessive RAM usage.</p></li>
<li><p>Writes the filtered row names to <code>ss.rownames.csv</code> in <code>new_supsubj_dir</code>.</p></li>
</ol></div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><a href="build_supersubject.html">build_supersubject</a></p></div>
    </div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Serena Defina, Sander Lamballais, Ryan Muetzel.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

