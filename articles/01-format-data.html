<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Getting ready, step 2: formatting input data • verywise</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Getting ready, step 2: formatting input data">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">verywise</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.2.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/00-installation-sys-requirements.html">Getting ready, step 1: Installation and system requirements</a></li>
    <li><a class="dropdown-item" href="../articles/01-format-data.html">Getting ready, step 2: formatting input data</a></li>
    <li><a class="dropdown-item" href="../articles/02-simulate-data.html">Optional: simulating data</a></li>
    <li><a class="dropdown-item" href="../articles/03-run-vw-lmm.html">Running vertex-wise linear mixed models</a></li>
    <li><a class="dropdown-item" href="../articles/04-visualize-results.html">Visualizing `verywise` results: BrainMapp</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/SereDef/verywise/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Getting ready, step 2: formatting input data</h1>
                        <h4 data-toc-skip class="author">Serena
Defina</h4>
            
            <h4 data-toc-skip class="date">2025-08-14</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/SereDef/verywise/blob/main/vignettes/articles/01-format-data.Rmd" class="external-link"><code>vignettes/articles/01-format-data.Rmd</code></a></small>
      <div class="d-none name"><code>01-format-data.Rmd</code></div>
    </div>

    
    
<p><code>verywise</code> was developed to handle complex datasets, with
<em>multiple cohorts/sites</em> as well as <em>repeated neuro-imaging
measures</em>.</p>
<p>In this article we describe how the software expects the input data
directory to look like, and what pre-processing steps are necessary to
get both your <strong>neuro-imaging</strong> data and your
<strong>phenotype</strong> data ready for analysis.</p>
<div class="section level2">
<h2 id="a-verywise-input-directory-structure">A <code>verywise</code> input directory structure<a class="anchor" aria-label="anchor" href="#a-verywise-input-directory-structure"></a>
</h2>
<p>Here is an example of a typical <code>verywise</code> input
directory:</p>
<p><img src="01-folder-structure.png" alt="Example of a verywise input directory structure."></p>
<p>This is also what you will see if you use our data simulation
functions. The phenotype file does not need to be inside the same folder
as the neuroimaging data, but we placed it in there to keep things
tidy.</p>
<p>If you have more than one neuroimaging site (or “cohort” or dataset,
however you want to call it), then each site should have it’s own
folder. Inside each site folder you should have one sub-folder for each
individual measurement (or “session”). These sub-folders should follow
the <a href="https://bids.neuroimaging.io/" class="external-link">BIDS convention</a>, so for
example: <code>sub-47_ses-03</code> will have the 3rd measurement of
subject #47. This will be done automatically by FreeSurfer (see next
session)</p>
</div>
<div class="section level2">
<h2 id="preparing-your-brain-data">Preparing your brain data<a class="anchor" aria-label="anchor" href="#preparing-your-brain-data"></a>
</h2>
<p>To obtain brain surface data, you should first run your subjects
through FreeSurfer, using the following command:</p>
<pre><code>recon-all -s &lt;subject-id&gt; -qcache</code></pre>
<p>Don’t forget the <code>-qcache</code> flag! Full instructions can be
found <a href="https://surfer.nmr.mgh.harvard.edu/fswiki/FsTutorial/QdecGroupAnalysis_freeview" class="external-link">here</a>,
under the header “pre-smoothed fsaverage surfaces”.</p>
<p>The output folder should now look similar to the one you have seen
above. Inside each subject-session sub-folder you should be able to find
a “surf” directory where the brain surface maps for each hemisphere are
saved as <code>.mgh</code> files. These are the files we will be using
for our analysis.</p>
</div>
<div class="section level2">
<h2 id="preparing-your-phenotype-data">Preparing your phenotype data<a class="anchor" aria-label="anchor" href="#preparing-your-phenotype-data"></a>
</h2>
<p>So your brain data is all sorted, but you will also need to prepare a
“phenotype” dataset where to store your variables of interest (i.e. the
exposures and covariates). This can be either saved as a file (e.g.,
<code>.rds</code> of <code>.csv</code>), or it can be an R data.frame
that you have already loaded in memory.</p>
<p>Either way, it should it should look something like this:</p>
<p><img src="01-pheno-structure.png" alt="Example of a phenotype data frame.">
So this should be in the <em>“long format”</em> with different
timepoints/groups stacked row-wise.</p>
<p>The <strong><code>folder_id</code></strong> column is important
because it is used to link the phenotype to the correct brain data
file.</p>
<p>… TODO</p>
<p>Note that the phenotype file/data object can also be an
<strong>imputed dataset</strong>. <code>verywise</code> currently
supports several mi dataset formats, including the outputs of mice, mi,
amelia… TODO</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Serena Defina, Sander Lamballais, Ryan Muetzel.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
